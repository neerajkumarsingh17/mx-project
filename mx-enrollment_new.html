<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Enrollment Form</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="main.css">
    <!-- <meta name="csrf_token" content="${ csrf_token }"> -->
    <script type="text/javascript"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        #enrollment {
            position: relative;
            height: 500px;
            width: 500px;
            margin: 100px;
            padding: 50px;
            border: 1px solid black;
        }
    </style>
</head>

<body>
    <div class='container'>
        <div class="jumbotron">
            <h1>Enrollment Form</h1>
            <form id="enrollment" action="" method="post">
                {% csrf_token %}
                <h2>Courses :</h2>
                <select id='course' name="course_id" title="courses">
                    {% for enroll in course %}
                    <option value="{{ enroll }}">{{ enroll }}</option>
                    {% endfor %}
                </select>

                <br>
                <h2>User Name :</h2>
                <h5>Enter usernames separated by commas: </h5><input id='getusers' type="text" name="getuser" size="39">

                <p><input type="checkbox" id="checkbox" name="bulk_notif" value="bulk_notif">
                    Auto enroll users
                </p>
                <div id="result">
                    
                </div>
                <input id='sumbit' type="submit" value="Enrolled" />

            </form>
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>


    <script>

        $("#sumbit").click(function (e) {
            e.preventDefault();
            var users = $("#getusers").val()
            var course = $("#course").val()
            var all_user = $('#checkbox').is(':checked');
            data = {
                course: course,
                users: users,
                all_user: all_user
            }
            alert(course, users)
            console.log(users)
            $.post("enroll_user/", data, function (data, status) {
                // alert(status);
                $('#result').append(data.enroll_task_status);
                console.log("Data: " + data + "\nStatus: " + status + "\n: " + data.enroll_task_status);
            })
        });
    </script>


</body>

</html>
